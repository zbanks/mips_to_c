struct _mips2c_stack_EnToto_Destroy {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_EnToto_Draw {
    /* 0x00 */ char pad_0[0x38];
    /* 0x38 */ Gfx *sp38;                           /* inferred */
    /* 0x3C */ char pad_3C[0x4];
    /* 0x40 */ GraphicsContext *sp40;               /* inferred */
    /* 0x44 */ char pad_44[0x8];                    /* maybe part of sp40[3]? */
    /* 0x4C */ ? sp4C;                              /* inferred */
    /* 0x4C */ char pad_4C[0xC];
};                                                  /* size = 0x58 */

struct _mips2c_stack_EnToto_Init {
    /* 0x00 */ char pad_0[0x30];
};                                                  /* size = 0x30 */

struct _mips2c_stack_EnToto_Update {
    /* 0x00 */ char pad_0[0x2C];
    /* 0x2C */ CollisionCheckContext *sp2C;         /* inferred */
    /* 0x30 */ char pad_30[0x8];
};                                                  /* size = 0x38 */

struct _mips2c_stack_func_80BA36C0 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA383C {
    /* 0x00 */ char pad_0[0x24];
    /* 0x24 */ SkelAnime *sp24;                     /* inferred */
};                                                  /* size = 0x28 */

struct _mips2c_stack_func_80BA3930 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA397C {};              /* size 0x0 */

struct _mips2c_stack_func_80BA39C8 {
    /* 0x00 */ char pad_0[0x2C];
    /* 0x2C */ Actor *sp2C;                         /* inferred */
};                                                  /* size = 0x30 */

struct _mips2c_stack_func_80BA3BFC {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA3C88 {
    /* 0x00 */ char pad_0[0x20];
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA3CC4 {
    /* 0x00 */ char pad_0[0x20];
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA3D38 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA3DBC {
    /* 0x00 */ char pad_0[0x20];
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA3EC0 {};              /* size 0x0 */

struct _mips2c_stack_func_80BA3ED4 {};              /* size 0x0 */

struct _mips2c_stack_func_80BA3EE8 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA3F2C {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA3FB0 {};              /* size 0x0 */

struct _mips2c_stack_func_80BA3FCC {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA402C {
    /* 0x00 */ char pad_0[0x1E];
    /* 0x1E */ s16 sp1E;                            /* inferred */
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA407C {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA40D4 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA4128 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA415C {
    /* 0x00 */ char pad_0[0x18];
    /* 0x18 */ void *sp18;                          /* inferred */
    /* 0x1C */ char pad_1C[0x4];
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA4204 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA42BC {
    /* 0x00 */ char pad_0[0x3C];
    /* 0x3C */ Actor *sp3C;                         /* inferred */
};                                                  /* size = 0x40 */

struct _mips2c_stack_func_80BA43F4 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA445C {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA44A0 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA44D4 {
    /* 0x00 */ char pad_0[0x1C];
    /* 0x1C */ ? sp1C;                              /* inferred */
    /* 0x1C */ char pad_1C[0xC];
};                                                  /* size = 0x28 */

struct _mips2c_stack_func_80BA4530 {
    /* 0x00 */ char pad_0[0x28];
};                                                  /* size = 0x28 */

struct _mips2c_stack_func_80BA46D8 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA4740 {};              /* size 0x0 */

struct _mips2c_stack_func_80BA47E0 {
    /* 0x00 */ char pad_0[0x64];
    /* 0x64 */ f32 sp64;                            /* inferred */
    /* 0x68 */ f32 sp68;                            /* inferred */
    /* 0x6C */ f32 sp6C;                            /* inferred */
};                                                  /* size = 0x70 */

struct _mips2c_stack_func_80BA49A4 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA4A00 {
    /* 0x00 */ char pad_0[0x20];
};                                                  /* size = 0x20 */

struct _mips2c_stack_func_80BA4B24 {
    /* 0x00 */ char pad_0[0x24];
    /* 0x24 */ Actor *sp24;                         /* inferred */
};                                                  /* size = 0x28 */

struct _mips2c_stack_func_80BA4C0C {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA4C44 {
    /* 0x00 */ char pad_0[0x18];
};                                                  /* size = 0x18 */

struct _mips2c_stack_func_80BA4CB4 {
    /* 0x00 */ char pad_0[0x2C];
    /* 0x2C */ SkelAnime *sp2C;                     /* inferred */
    /* 0x30 */ char pad_30[0x8];
};                                                  /* size = 0x38 */

void func_80BA36C0(EnToto *arg0, s8 arg2, u8);      /* static */
void func_80BA383C(EnToto *arg0, GlobalContext *arg1); /* static */
s32 func_80BA397C(EnToto *arg0, s16 arg1);          /* static */
void func_80BA3C88(EnToto *arg0);                   /* static */
s32 func_80BA44D4(? *arg0, Actor *arg1);            /* static */
void func_80BA4CB4(Actor *arg0, GlobalContext *arg1); /* static */
extern AnimationHeader D_06000C80;
extern AnimationHeader D_06001324;
extern AnimationHeader D_060016A4;
extern AnimationHeader D_06001DF0;
extern AnimationHeader D_060022C8;
extern AnimationHeader D_060028B8;
extern AnimationHeader D_06003AA8;
extern FlexSkeletonHeader D_0600A978;
extern AnimationHeader D_0600B3E0;
extern AnimationHeader D_0600C880;
static ColliderCylinderInit D_80BA4FF0 = {
    {9, 0, 0xD, 0x39, 0x20, 1},
    {2, {0x100000, 0, 0}, {0x1000202, 0, 0}, 0, 5, 1},
    {0x14, 0x3C, 0, {0, 0, 0}},
};
static ? D_80BA501C;                                /* unable to generate initializer */
static InitChainEntry D_80BA5028;                   /* unable to generate initializer */
static EnTotoText D_80BA502C[2] = {{0, 0, 0x2B21}, {3, 2, 0}};
static EnTotoText D_80BA5034 = {0, 0, 0x2B23};
static EnTotoText D_80BA5038[3] = {{2, 1, 0x2B24}, {4, 0, 0x2B25}, {3, 2, 0}};
static EnTotoText D_80BA5044 = {4, 0, 0x2B25};
static EnTotoText D_80BA5048[8] = {
    {0x10, 0, 0x2A94},
    {0, 0, 0x2A95},
    {4, 0, 0x2A96},
    {4, 0, 0x2A97},
    {0, 0, 0x2A98},
    {0, 0, 0x2A99},
    {4, 0, 0x2A9A},
    {4, 0, 0x2A9B},
};
static EnTotoText D_80BA5068[3] = {{0, 0, 0x2AE1}, {0, 0, 0x2AE2}, {4, 0, 0x2AE3}};
static EnTotoText D_80BA5074 = {4, 0, 0x2AE4};
static ? D_80BA5078;                                /* unable to generate initializer */
static EnTotoText D_80BA5088[13] = {
    {5, 0, 0},
    {6, 0x14, 0},
    {7, 0, 0},
    {8, 9, 0},
    {9, 0xA, 0},
    {1, 0, 0},
    {0xA, 0, 0},
    {0xB, 0, 0},
    {0xC, 0, 0},
    {0xD, 0, 0},
    {0xF, 0, 0},
    {0x11, 1, 0},
    {0x11, 0, 0},
};
static EnTotoText D_80BA50BC[5] = {{5, 0, 0}, {6, 0x14, 0}, {8, 5, 0}, {0xC, 0, 0}, {0xD, 0, 0}}; /* extra bytes: 2 */
static ? D_80BA50D2;                                /* unable to generate initializer */
static ? D_80BA50DC;                                /* unable to generate initializer */
static ? D_80BA510C;                                /* unable to generate initializer */
static ? D_80BA511E;                                /* unable to generate initializer */
static ? D_80BA5120;                                /* unable to generate initializer */
static ? D_80BA5128;                                /* unable to generate initializer */
static ? D_80BA512C;                                /* unable to generate initializer */
static ? D_80BA5174;                                /* unable to generate initializer */
static ? D_80BA51B8;                                /* unable to generate initializer */
static ? D_80BA51C4;                                /* unable to generate initializer */

void func_80BA36C0(EnToto *arg0, s8 arg2) {
    arg0->unk2B7 = 0;
    arg0->actionFuncIndex = arg2;
    *(&D_80BA501C + ((arg2 & 0xFF) * 4))();
}

void EnToto_Init(Actor *thisx, GlobalContext *globalCtx) {
    u16 temp_v0;
    AnimationHeader *phi_a3;
    EnToto *this = (EnToto *) thisx;

    Actor_ProcessInitChain((Actor *) this, &D_80BA5028);
    Collider_InitAndSetCylinder(globalCtx, &this->collider, (Actor *) this, &D_80BA4FF0);
    if ((globalCtx->sceneNum == 0x15) && (temp_v0 = gSaveContext.time, (((s32) temp_v0 < 0x4000) == 0)) && ((s32) temp_v0 < 0xE555)) {
        Actor_MarkForDeath((Actor *) this);
        return;
    }
    ActorShape_Init(&this->actor.shape, 0.0f, func_800B3FC0, 30.0f);
    this->actor.bgCheckFlags |= 0x400;
    if (globalCtx->sceneNum == 0x12) {
        phi_a3 = &D_06003AA8;
    } else {
        phi_a3 = &D_0600C880;
    }
    SkelAnime_InitSV(globalCtx, &this->skelAnime, &D_0600A978, phi_a3, this->limbDrawTbl, this->transitionDrawTbl, 0x12);
    func_80BA36C0(this, (u8) globalCtx, 0U);
    this->actor.shape.rot.x = 0;
}

void EnToto_Destroy(Actor *thisx, GlobalContext *globalCtx) {
    EnToto *this = (EnToto *) thisx;
    Collider_DestroyCylinder(globalCtx, &this->collider);
}

void func_80BA383C(EnToto *arg0, GlobalContext *arg1) {
    SkelAnime *sp24;
    SkelAnime *temp_a0;
    u16 temp_v0;

    temp_a0 = arg0 + 0x144;
    sp24 = temp_a0;
    if ((SkelAnime_FrameUpdateMatrix(temp_a0) != 0) && (arg0->actionFuncIndex == 1) && (&D_06000C80 != arg0->skelAnime.animCurrentSeg)) {
        temp_v0 = arg1->msgCtx.unk11F04;
        if ((temp_v0 != 0x2A98) && (temp_v0 != 0x2A99)) {
            if ((arg0->unk2B4 & 1) == 0) {
                if (Rand_ZeroOne() > 0.5f) {
                    goto block_8;
                }
            } else {
block_8:
                arg0->unk2B4 = (arg0->unk2B4 + 1) & 3;
            }
        }
        SkelAnime_ChangeAnimDefaultStop(sp24, *(&D_80BA5078 + (arg0->unk2B4 * 4)));
    }
    func_800BBB74(arg0 + 0x260, 0x14, 0x50, 3);
}

void func_80BA3930(EnToto *this, GlobalContext *globalCtx) {
    AnimationHeader *phi_a3;

    phi_a3 = &D_0600C880;
    if (globalCtx->sceneNum == 0x12) {
        phi_a3 = &D_06003AA8;
    }
    SkelAnime_ChangeAnimTransitionRepeat(&this->skelAnime, phi_a3, -4.0f);
}

s32 func_80BA397C(EnToto *arg0, s16 arg1) {
    s16 temp_v0;
    s32 phi_v1;

    temp_v0 = arg0->actor.yawTowardsPlayer - arg0->actor.home.rot.y;
    phi_v1 = (s32) temp_v0;
    if ((s32) temp_v0 < 0) {
        phi_v1 = -(s32) temp_v0;
    }
    if (phi_v1 < (s32) arg1) {
        return 1;
    }
    return 0;
}

void func_80BA39C8(EnToto *this, GlobalContext *globalCtx) {
    Actor *sp2C;
    s16 temp_v0;
    u16 temp_v1;

    sp2C = globalCtx->actorCtx.actorList[2].first;
    func_80BA383C(this, globalCtx);
    if (func_800B84D0((Actor *) this, globalCtx) != 0) {
        func_80BA36C0(this, (u8) globalCtx, 1U);
        if (globalCtx->sceneNum != 0x12) {
            Actor_SetSwitchFlag(globalCtx, this->actor.params & 0x7F);
        } else if (sp2C->unk_14B == 3) {
            Actor_SetSwitchFlag(globalCtx, (s32) this->actor.home.rot.x);
        }
        this->unk2B6 = 0;
        return;
    }
    temp_v0 = globalCtx->sceneNum;
    if (((temp_v0 == 0x15) && ((temp_v1 = gSaveContext.time, (((s32) temp_v1 < 0x4000) != 0)) || ((s32) temp_v1 >= 0xED02))) || ((temp_v0 != 0x15) && (func_80BA397C(this, 0x2000) != 0))) {
        if (this->unk2B6 != 0) {
            this->text = &D_80BA5044;
            this->actor.flags |= 0x10000;
            func_800B8500((Actor *) this, globalCtx, 9999.9f, 9999.9f, 0);
        } else {
            this->actor.flags &= 0xFFFEFFFF;
            func_800B8614((Actor *) this, globalCtx, 50.0f);
            if (globalCtx->sceneNum == 0x12) {
                if (sp2C->unk_14B == 3) {
                    if (Flags_GetSwitch(globalCtx, (s32) this->actor.home.rot.x) == 0) {
                        this->text = D_80BA5068;
                    } else {
                        this->text = &D_80BA5074;
                    }
                } else {
                    this->text = D_80BA5048;
                }
            } else if (((gSaveContext.weekEventReg[50] & 1) != 0) || ((gSaveContext.weekEventReg[51] & 0x80) != 0)) {
                this->text = D_80BA502C;
            } else if (Flags_GetSwitch(globalCtx, this->actor.params & 0x7F) == 0) {
                this->text = &D_80BA5034;
            } else {
                this->text = D_80BA5038;
            }
        }
        this->actor.textId = this->text->textId;
    }
}

void func_80BA3BFC(EnToto *this, GlobalContext *globalCtx) {
    SkelAnime *temp_a0;

    temp_a0 = &this->skelAnime;
    if (globalCtx->sceneNum == 0x12) {
        this = this;
        SkelAnime_ChangeAnimTransitionStop(temp_a0, &D_06000C80, -4.0f);
        this->unk2B4 = 0;
        return;
    }
    if (this->text->unk0 == 4) {
        this = this;
        func_80151BB4(globalCtx, 9U);
    }
    SkelAnime_ChangeAnimTransitionRepeat(this + 0x144, &D_0600B3E0, -4.0f);
}

void func_80BA3C88(EnToto *arg0) {
    Math_SmoothStepToS(arg0 + 0xBE, arg0->actor.yawTowardsPlayer, 4, 0xFA0, (s16) 0x320);
}

void func_80BA3CC4(EnToto *this, GlobalContext *globalCtx) {
    func_80BA383C(this, globalCtx);
    func_80BA3C88(this);
    if (func_800B867C((Actor *) this, globalCtx) != 0) {
        func_80BA36C0(this, (u8) globalCtx, this->text->unk1);
        return;
    }
    func_80BA4C44(this, globalCtx);
}

void func_80BA3D38(EnToto *this, GlobalContext *globalCtx) {
    this->cutscene = this->actor.cutscene;
    if (((gSaveContext.weekEventReg[50] & 1) != 0) || ((gSaveContext.weekEventReg[51] & 0x80) != 0)) {
        this->text = D_80BA50BC;
    } else {
        this->text = D_80BA5088;
    }
    func_80BA4C0C(this, globalCtx);
    globalCtx->actorCtx.unk5 |= 0x20;
    this->unk260 = 0;
}

void func_80BA3DBC(EnToto *this, GlobalContext *globalCtx) {
    Actor *temp_v0;

    func_80BA383C(this, globalCtx);
    if (this->unk2B7 == 0) {
        if (func_80BA4C44(this, globalCtx) != 0) {
            if ((this->text->unk1 != 0) && (((gSaveContext.weekEventReg[50] & 1) != 0) || ((gSaveContext.weekEventReg[51] & 0x80) != 0))) {
                this->unk2B7 = 1;
                return;
            }
            goto block_9;
        }
        /* Duplicate return node #10. Try simplifying control flow for better match */
        return;
    }
    temp_v0 = globalCtx->actorCtx.actorList[2].first;
    if (((temp_v0->unk_A6C & 0x400) != 0) && (temp_v0->unk_AE7 != 0)) {
        func_80151BB4(globalCtx, 0x30U);
        func_80151BB4(globalCtx, 9U);
        func_80151BB4(globalCtx, 0xAU);
block_9:
        func_80BA36C0(this, (u8) globalCtx, 0U);
        ActorCutscene_Stop((s16) this->cutscene);
        globalCtx->actorCtx.unk5 &= 0xFFDF;
    }
}

s32 func_80BA3EC0(EnToto *this, GlobalContext *globalCtx) {
    return 1;
}

s32 func_80BA3ED4(EnToto *this, GlobalContext *globalCtx) {
    return 0;
}

s32 func_80BA3EE8(EnToto *this, GlobalContext *globalCtx) {
    if (this->text->unk1 == 2) {
        func_800B7298(globalCtx, NULL, 7U);
    }
    return 0;
}

s32 func_80BA3F2C(EnToto *this, GlobalContext *globalCtx) {
    u16 temp_a2;

    temp_a2 = this->text->textId;
    if (temp_a2 != 0) {
        func_80151938(globalCtx, temp_a2 & 0xFFFF);
    } else {
        func_801477B4(globalCtx);
        func_80BA3EE8(this, globalCtx);
    }
    if (this->text->unk0 == 4) {
        func_80151BB4(globalCtx, 9U);
    }
    return 0;
}

s32 func_80BA3FB0(EnToto *this, GlobalContext *globalCtx) {
    this->unk2B1 = this->text->unk1;
    return 0;
}

s32 func_80BA3FCC(EnToto *this, GlobalContext *globalCtx) {
    u8 temp_t6;
    u8 temp_v0;
    s32 phi_v1;
    s32 phi_v0;

    temp_v0 = this->unk2B1;
    temp_t6 = temp_v0 - 1;
    if (temp_v0 == 0) {
        phi_v1 = 0;
    } else {
        this->unk2B1 = temp_t6;
        phi_v1 = temp_t6 & 0xFF;
    }
    phi_v0 = 0;
    if (phi_v1 == 0) {
        func_801518B0(globalCtx, this->text->textId, NULL);
        phi_v0 = 1;
    }
    return phi_v0;
}

s32 func_80BA402C(EnToto *this, GlobalContext *globalCtx) {
    s16 sp1E;
    s8 temp_a0;

    temp_a0 = this->cutscene;
    this = this;
    sp1E = (s16) temp_a0;
    this->cutscene = ActorCutscene_GetAdditionalCutscene((s16) temp_a0);
    ActorCutscene_SetIntentToPlay((s16) this->cutscene);
    ActorCutscene_Stop((s16) temp_a0);
    return 0;
}

s32 func_80BA407C(EnToto *this, GlobalContext *globalCtx) {
    s8 temp_a0;

    temp_a0 = this->cutscene;
    this = this;
    if (ActorCutscene_GetCanPlayNext((s16) temp_a0) != 0) {
        ActorCutscene_StartAndSetUnkLinkFields((s16) this->cutscene, globalCtx->actorCtx.actorList[2].first);
        return 1;
    }
    ActorCutscene_SetIntentToPlay((s16) this->cutscene);
    return 0;
}

s32 func_80BA40D4(EnToto *this, GlobalContext *globalCtx) {
    if ((func_80152498(&globalCtx->msgCtx) == 5) && (func_80147624(globalCtx) != 0)) {
        return 1;
    }
    return 0;
}

s32 func_80BA4128(EnToto *this, GlobalContext *globalCtx) {
    if (func_80152498(&globalCtx->msgCtx) == 2) {
        return 1;
    }
    return 0;
}

s32 func_80BA415C(EnToto *this, GlobalContext *globalCtx) {
    void *sp18;
    void *temp_v0;

    if ((func_80152498(&globalCtx->msgCtx) == 4) && (func_80147624(globalCtx) != 0)) {
        temp_v0 = globalCtx + 0x10000;
        if (globalCtx->msgCtx.choiceIndex != 0) {
            sp18 = temp_v0;
            func_8019F230();
        } else {
            sp18 = temp_v0;
            func_8019F208();
        }
        if (sp18->unk_6929 != 0) {
            return 1;
        }
        return this->text->unk1 + 1;
    }
    return 0;
}

s32 func_80BA4204(EnToto *this, GlobalContext *globalCtx) {
    u8 temp_t6;
    u8 temp_v1;
    void *temp_v1_2;
    s32 phi_v0;
    u16 phi_v0_2;

    temp_v1 = this->unk2B1;
    temp_t6 = temp_v1 - 1;
    if (temp_v1 == 0) {
        phi_v0 = 0;
    } else {
        this->unk2B1 = temp_t6;
        phi_v0 = temp_t6 & 0xFF;
    }
    if (phi_v0 == 0) {
        if (((gSaveContext.weekEventReg[50] & 1) == 0) && ((gSaveContext.weekEventReg[51] & 0x80) == 0)) {
            temp_v1_2 = (gSaveContext.playerForm * 0xC) - 0xC + &D_80BA50DC;
            if (this->text->unk0 == 6) {
                phi_v0_2 = temp_v1_2->unk_0;
            } else {
                phi_v0_2 = temp_v1_2->unk_4;
            }
            func_801518B0(globalCtx, phi_v0_2 & 0xFFFF, NULL);
        }
        return 1;
    }
    return 0;
}

s32 func_80BA42BC(EnToto *this, GlobalContext *globalCtx) {
    Actor *sp3C;
    f32 temp_f0;
    u32 phi_s0;

    sp3C = globalCtx->actorCtx.actorList[2].first;
    func_80BA3FB0(this, globalCtx);
    func_800B7298(globalCtx, NULL, 6U);
    temp_f0 = sp3C->world.pos.z;
    phi_s0 = 0U;
    if (temp_f0 > -310.0f) {
        if ((sp3C->world.pos.x > -150.0f) || (temp_f0 > -172.0f)) {
            phi_s0 = 3U;
        } else {
            phi_s0 = 1U;
            if (temp_f0 > -232.0f) {
                phi_s0 = 2U;
            }
        }
    }
    func_80122744(globalCtx, (void *) this->unk2BC, phi_s0, &D_80BA511E - (phi_s0 * 6));
    this->spotlights = Actor_Spawn(&globalCtx->actorCtx, globalCtx, 0x199, 0.0f, 0.0f, 0.0f, (s16) 0, (s16) 0, (s16) 0, (s16) 0xF02);
    return 0;
}

s32 func_80BA43F4(EnToto *this, GlobalContext *globalCtx) {
    func_80BA3C88(this);
    if (func_80122760(globalCtx, (void *) this->unk2BC, 60.0f) != 0) {
        func_800B7298(globalCtx, NULL, 0x13U);
        return func_80BA4204(this, globalCtx);
    }
    return 0;
}

s32 func_80BA445C(EnToto *this, GlobalContext *globalCtx) {
    if (func_80BA4128(this, globalCtx) != 0) {
        func_800B7298(globalCtx, NULL, 6U);
        return 1;
    }
    return 0;
}

s32 func_80BA44A0(EnToto *this, GlobalContext *globalCtx) {
    ActorCutscene_Stop((s16) this->cutscene);
    this->unk2B1 = 0;
    return 0;
}

s32 func_80BA44D4(? *arg0, Actor *arg1) {
    ? sp1C;
    s32 phi_v0;

    Math_Vec3s_ToVec3f((Vec3f *) &sp1C, arg0 + 6);
    phi_v0 = 0;
    if (Math_Vec3f_DistXZ(arg1 + 0x24, (Vec3f *) &sp1C) < 10.0f) {
        phi_v0 = 1;
    }
    return phi_v0;
}

s32 func_80BA4530(EnToto *this, GlobalContext *globalCtx) {
    ? *temp_s0;
    ? *temp_s0_2;
    Actor *temp_a0;
    Actor *temp_s2;
    u8 temp_t9;
    u8 temp_v0;
    ? *phi_s0;

    temp_s2 = globalCtx->actorCtx.actorList[2].first;
    func_80BA3C88(this);
    if (temp_s2->world.pos.z > -270.0f) {
        temp_a0 = this->spotlights;
        if (temp_a0 != 0) {
            Actor_MarkForDeath(temp_a0);
        }
        this->unk2B6 = 1;
        return (s32) this->text->unk1;
    }
    if ((temp_s2->bgCheckFlags & 1) != 0) {
        temp_s0 = (gSaveContext.playerForm * 0xC) - 0xC + &D_80BA50DC;
        if (func_80BA44D4(temp_s0, temp_s2) != 0) {
            Math_Vec3s_ToVec3f((Vec3f *) &temp_s2->world, temp_s0 + 6);
            temp_s2->shape.rot.y = 0;
            temp_s2->unk_AD4 = 0;
            return func_80BA407C(this, globalCtx);
        }
        if ((gSaveContext.weekEventReg[50] & 1) == 0) {
            phi_s0 = &D_80BA50DC;
            if ((gSaveContext.weekEventReg[51] & 0x80) == 0) {
loop_10:
                temp_s0_2 = phi_s0 + 0xC;
                phi_s0 = temp_s0_2;
                if (func_80BA44D4(phi_s0, temp_s2) != 0) {
                    temp_v0 = this->unk2B1;
                    temp_t9 = temp_v0 + 1;
                    if ((s32) temp_v0 < 0xA) {
                        this->unk2B1 = temp_t9;
                        if ((temp_t9 & 0xFF) >= 0xA) {
                            func_801518B0(globalCtx, *(&D_80BA50D2 + (gSaveContext.playerForm * 0xC)), NULL);
                        }
                    }
                } else if (temp_s0_2 == &D_80BA510C) {
                    this->unk2B1 = 0;
                } else {
                    goto loop_10;
                }
            }
        }
        goto block_17;
    }
block_17:
    return 0;
}

s32 func_80BA46D8(EnToto *this, GlobalContext *globalCtx) {
    u8 temp_v0;
    u8 phi_v1;

    func_800B7298(globalCtx, NULL, 0x44U);
    temp_v0 = gSaveContext.playerForm;
    if (temp_v0 == 4) {
        phi_v1 = 0U;
    } else {
        phi_v1 = temp_v0;
    }
    func_80152434(globalCtx, *(&D_80BA5120 + (phi_v1 * 2)));
    return 0;
}

s32 func_80BA4740(EnToto *this, GlobalContext *globalCtx) {
    u8 phi_v0;
    u8 phi_v0_2;

    if (globalCtx->msgCtx.unk1202A == 4) {
        if (gSaveContext.playerForm == 4) {
            gSaveContext.weekEventReg[56] |= 0x10;
        }
        phi_v0 = gSaveContext.playerForm;
        if (gSaveContext.playerForm == 3) {
            gSaveContext.weekEventReg[56] |= 0x20;
            phi_v0 = gSaveContext.playerForm;
        }
        phi_v0_2 = phi_v0;
        if (phi_v0 == 2) {
            gSaveContext.weekEventReg[56] |= 0x40;
            phi_v0_2 = gSaveContext.playerForm;
        }
        if (phi_v0_2 == 1) {
            gSaveContext.weekEventReg[56] |= 0x80;
        }
        return 1;
    }
    return 0;
}

s32 func_80BA47E0(EnToto *this, GlobalContext *globalCtx) {
    f32 sp64;
    ActorContext *temp_s2;
    s32 temp_s1;
    u8 temp_v0;
    u8 phi_v0;
    u8 phi_v0_2;
    u8 phi_v0_3;
    s32 phi_s0;

    this->unk2B3 = 0;
    temp_v0 = gSaveContext.weekEventReg[56];
    phi_v0 = temp_v0;
    phi_s0 = 0;
    if ((temp_v0 & 0x10) != 0) {
        this->unk2B3 = 1;
        phi_v0 = gSaveContext.weekEventReg[56];
    }
    phi_v0_2 = phi_v0;
    if ((phi_v0 & 0x20) != 0) {
        this->unk2B3 += 2;
        phi_v0_2 = gSaveContext.weekEventReg[56];
    }
    phi_v0_3 = phi_v0_2;
    if ((phi_v0_2 & 0x40) != 0) {
        this->unk2B3 += 4;
        phi_v0_3 = gSaveContext.weekEventReg[56];
    }
    if ((phi_v0_3 & 0x80) != 0) {
        this->unk2B3 += 8;
    }
    do {
        temp_s1 = phi_s0 + 1;
        if ((temp_s1 != gSaveContext.playerForm) && ((*(&D_80BA5128 + phi_s0) & this->unk2B3) != 0)) {
            temp_s2 = &globalCtx->actorCtx;
            Math_Vec3s_ToVec3f((Vec3f *) &sp64, &D_80BA50DC + (phi_s0 * 0xC) + 6);
            Actor_Spawn(temp_s2, globalCtx, 0, sp64, sp68, sp6C, (s16) (phi_s0 + 2), (s16) 0, (s16) 0, (s16) -1);
        }
        phi_s0 = temp_s1;
    } while (temp_s1 != 4);
    func_80BA402C(this, globalCtx);
    if (((gSaveContext.weekEventReg[50] & 1) != 0) || ((gSaveContext.weekEventReg[51] & 0x80) != 0)) {
        func_80BA402C(this, globalCtx);
    }
    return 0;
}

s32 func_80BA49A4(EnToto *this, GlobalContext *globalCtx) {
    func_800B7298(globalCtx, NULL, 0x44U);
    func_801A31EC(0x54, 4, (this->unk2B3 ^ 0xF) & 0xFF);
    this->unk2B1 = 4;
    return 0;
}

s32 func_80BA4A00(EnToto *this, GlobalContext *globalCtx) {
    Actor *temp_a0;
    Actor *temp_s0;
    Actor *temp_s0_2;
    u8 temp_t6;
    u8 temp_v0;
    s32 phi_v1;
    Actor *phi_s0;

    temp_v0 = this->unk2B1;
    temp_t6 = temp_v0 - 1;
    if (temp_v0 == 0) {
        phi_v1 = 0;
    } else {
        this->unk2B1 = temp_t6;
        phi_v1 = temp_t6 & 0xFF;
    }
    if ((phi_v1 == 0) && (this = this, (func_801A2DE0(0x54) == 0))) {
        temp_s0 = globalCtx->actorCtx.actorList[2].first->next;
        phi_s0 = temp_s0;
        if (temp_s0 != 0) {
            do {
                Actor_MarkForDeath(phi_s0);
                temp_s0_2 = phi_s0->next;
                phi_s0 = temp_s0_2;
            } while (temp_s0_2 != 0);
        }
        temp_a0 = this->spotlights;
        if (temp_a0 != 0) {
            Actor_MarkForDeath(temp_a0);
        }
        func_800B7298(globalCtx, NULL, 0x45U);
        if (this->unk2B3 == 0xF) {
            if (((s32) gSaveContext.day % 5) == 1) {
                gSaveContext.weekEventReg[50] |= 1;
                return 1;
            }
            gSaveContext.weekEventReg[51] |= 0x80;
            return 1;
        }
        func_80BA402C(this, globalCtx);
        return 1;
    }
    return 0;
}

s32 func_80BA4B24(EnToto *this, GlobalContext *globalCtx) {
    Actor *sp24;

    if (func_80BA40D4(this, globalCtx) != 0) {
        sp24 = globalCtx->actorCtx.actorList[2].first;
        SkelAnime_ChangeAnimTransitionStop(&this->skelAnime, &D_060028B8, -4.0f);
        if (sp24->unk_14B == 2) {
            if (Flags_GetSwitch(globalCtx, this->actor.params & 0x7F) == 0) {
                Actor_SetSwitchFlag(globalCtx, this->actor.params & 0x7F);
                return 1;
            }
            return 3;
        }
        if (Flags_GetSwitch(globalCtx, ((s32) this->actor.params >> 7) & 0x7F) == 0) {
            Actor_SetSwitchFlag(globalCtx, ((s32) this->actor.params >> 7) & 0x7F);
            return 4;
        }
        return 7;
    }
    return 0;
}

s32 func_80BA4C0C(EnToto *this, GlobalContext *globalCtx) {
    return *(&D_80BA512C + (this->text->unk0 * 4))();
}

s32 func_80BA4C44(EnToto *this, GlobalContext *globalCtx) {
    s32 temp_v0;

    temp_v0 = *(&D_80BA5174 + (this->text->unk0 * 4))(globalCtx);
    if (temp_v0 != 0) {
        this->text = &this->text[temp_v0];
        return func_80BA4C0C(this, globalCtx);
    }
    return 0;
}

void func_80BA4CB4(Actor *arg0, GlobalContext *arg1) {
    SkelAnime *sp2C;
    s32 temp_v0;
    u16 temp_a0;
    u8 temp_v0_2;
    AnimationHeader *phi_a1;
    AnimationHeader *phi_a1_2;

    temp_a0 = arg1->csCtx.npcActions[func_800EE200(arg1, 0x20DU)]->unk0;
    temp_v0 = temp_a0 & 0xFF;
    if (temp_a0 != arg0->unk_2B5) {
        arg0->unk_2B5 = (u8) temp_a0;
        if (temp_v0 != 4) {
            if (temp_v0 == 3) {
                SkelAnime_ChangeAnimTransitionStop(arg0 + 0x144, &D_06001DF0, -4.0f);
            } else {
                if (temp_v0 == 1) {
                    phi_a1 = &D_060016A4;
                } else {
                    phi_a1 = &D_060022C8;
                }
                SkelAnime_ChangeAnimDefaultStop(arg0 + 0x144, phi_a1);
                if ((arg0->unk_2B5 == 2) && (arg0->unk_2B3 != 0xF)) {
                    func_80151BB4(arg1, 9U);
                    func_80151BB4(arg1, 0xAU);
                }
            }
        }
    }
    sp2C = arg0 + 0x144;
    Math_ScaledStepToS(arg0 + 0xBE, arg0->home.rot.y, 0x320);
    if (SkelAnime_FrameUpdateMatrix(sp2C) != 0) {
        temp_v0_2 = arg0->unk_2B5;
        if (temp_v0_2 != 3) {
            if (temp_v0_2 == 1) {
                phi_a1_2 = &D_0600C880;
            } else {
                phi_a1_2 = &D_06001324;
            }
            SkelAnime_ChangeAnimDefaultRepeat(sp2C, phi_a1_2);
        }
    }
    if ((arg0->unk_2B5 == 4) && (Actor_HasParent(arg0, arg1) == 0)) {
        func_800B8A1C(arg0, arg1, 0x83, 9999.9f, 9999.9f);
    }
}

void EnToto_Update(Actor *thisx, GlobalContext *globalCtx) {
    CollisionCheckContext *sp2C;
    ColliderCylinder *temp_s0;
    CollisionCheckContext *temp_a1;
    EnToto *this = (EnToto *) thisx;

    if (func_800EE29C(globalCtx, 0x20DU) != 0) {
        func_80BA4CB4((Actor *) this, globalCtx);
    } else {
        *(&D_80BA51B8 + (this->actionFuncIndex * 4))(this, globalCtx);
    }
    temp_s0 = &this->collider;
    Collider_ResetCylinderAC(globalCtx, (Collider *) temp_s0);
    Collider_UpdateCylinder((Actor *) this, temp_s0);
    temp_a1 = &globalCtx->colChkCtx;
    sp2C = temp_a1;
    CollisionCheck_SetOC(globalCtx, temp_a1, (Collider *) temp_s0);
    CollisionCheck_SetAC(globalCtx, temp_a1, (Collider *) temp_s0);
    Actor_SetHeight((Actor *) this, 40.0f);
}

void EnToto_Draw(Actor *thisx, GlobalContext *globalCtx) {
    ? sp4C;
    GraphicsContext *sp40;
    Gfx *sp38;
    Gfx *temp_v0;
    GraphicsContext *temp_a0;
    EnToto *this = (EnToto *) thisx;

    sp4C.unk_0 = (s32) D_80BA51C4.unk_0;
    sp4C.unk_4 = (s32) D_80BA51C4.unk_4;
    sp4C.unk_8 = (s32) D_80BA51C4.unk_8;
    temp_a0 = globalCtx->state.gfxCtx;
    sp40 = temp_a0;
    func_8012C28C(temp_a0);
    temp_v0 = sp40->polyOpa.p;
    sp40->polyOpa.p = temp_v0 + 8;
    temp_v0->words.w0 = 0xDB060020;
    sp38 = temp_v0;
    sp38->words.w1 = Lib_SegmentedToVirtual((sp + (this->unk260 * 4))->unk_4C);
    Scene_SetRenderModeXlu(globalCtx, 0, 1U);
    SkelAnime_DrawSV(globalCtx, this->skelAnime.skeleton, this->skelAnime.limbDrawTbl, (s32) this->skelAnime.dListCount, NULL, NULL, (Actor *) this);
}
